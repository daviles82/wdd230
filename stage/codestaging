<!DOCTYPE html>
<html>
<head>
<title>Time Between Visits</title>
<style>
body {
  font-family: sans-serif;
}

.time-between-visits {
  font-size: 20px;
  margin-top: 20px;
}
</style>
</head>
<body>
<h1>Time Between Visits</h1>
<div class="time-between-visits">
  <span id="time-between-visits"></span> days
</div>

<script>
function getDaysSinceLastVisit() {
  // Get the current date and time.
  const now = new Date();


  // Get the day last visited from local storage.
  const dayLastVisited = window.localStorage.getItem("dayLastVisited");

  // If the day last visited is not set, return 0.
  if (!dayLastVisited) {
    return 0;
  }

  // Calculate the number of days since the last visit.
  const daysSinceLastVisit = Math.round((now - new Date(dayLastVisited)) / (1000 * 60 * 60 * 24));

  // Return the number of days since the last visit.
  return daysSinceLastVisit;
}

// Update the time between visits display.
function updateTimeBetweenVisits() {
  const daysSinceLastVisit = getDaysSinceLastVisit();
  document.getElementById("time-between-visits").innerHTML = daysSinceLastVisit;
}

// Set the day last visited to the current day when the page loads.
window.addEventListener("load", () => {
  window.localStorage.setItem("dayLastVisited", new Date().toISOString());
  updateTimeBetweenVisits();
});
</script>
</body>
</html>


const currentTemp = document.querySelector('#current-temp');
const weatherIcon = document.querySelector('#weather-icon');
const captionDesc = document.querySelector('figcaption');

const url = "https://api.openweathermap.org/data/2.5/weather?q=Fairbanks&units=imperial&appid=b5107679a673ae43d16f86f8c43b3eea";

async function apiFetch() {
    try {
        const response = await fetch(url);
        if (response.ok) {
            const data = await response.json();
            displayResults(data);
        } else {
            throw Error(await response.text());
        }
    } catch (error) {
        console.log(error);
    }
}

async function displayResults(weatherData) {
    currentTemp.innerHTML = weatherData.main.temp.toFixed(0);

    const iconsrc = `https://openweathermap.org/img/w/${weatherData.weather[0].icon}.png`;
    const conditions = weatherData.weather[0].description;

    weatherIcon.setAttribute('src', iconsrc);
    weatherIcon.setAttribute('alt', "conditions");
    captionDesc.textContent = conditions;
}

apiFetch();
